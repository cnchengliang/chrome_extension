<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../css/timer.css" />
  </head>
  <body class="body-timeup">
    <div id="content">
      <div id="bell-anim">
        <div class="bell-timeup">
          <div class="bell-gong">
          </div>
        </div>
      </div>
      <div class="message-timeup">
        <b></b>
      </div>
    </div>
    <audio src="../sounds/bell.wav" autoplay loop></audio>


    <script type="text/javascript">
	function getParam( name ) {
		name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
		var regexS = "[\\?&]"+name+"=([^&#]*)";
		var regex = new RegExp( regexS );
		var results = regex.exec( window.location.href );
		if( results == null ) {
		    return "";
		} else {
		    return unescape(results[1]);
		}
	}

	function init() {
		var bg = chrome.extension.getBackgroundPage();
		var auto_close = parseInt(bg.BG.common.getOption('close_tips'));
		var title = getParam('title');
		var msg = getParam('msg');

		document.querySelector('.message-timeup b').innerText = title + '  ' + msg;
		if(auto_close != 0)
		{
			closeWindow(auto_close);
		}
	}

	function closeWindow(seconds) {
		window.setTimeout(function() {
			window.close();
		}, seconds*1000);
	}
	init();


	</script>
  </body>
</html>
